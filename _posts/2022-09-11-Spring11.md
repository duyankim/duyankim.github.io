---
layout: post
author: "Yan"
catalog: true
subtitle: "Springì„ ì´ìš©í•œ MSA"
header-img: "img/header/spring.jpg"
title: "Spring - cloud"
date: 2022-09-11 11:40:08 +0000
categories:
  - Spring
tags:
  - Spring
  - MSA
  - java
  - cloud
comments: true
---

# Web Serviceì™€ Restful Service

- ì›¹ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•  ë•Œ ë‘ ê°€ì§€ ê¸°ìˆ ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. `web service` vs `RESTful service`
- web service ê¸°ìˆ ì€ í˜¸ì¶œ ë‹¹ì‚¬ìž ì‚¬ì´ì— ì—„ê²©í•œ ê³„ì•½ì´ ìžˆì„ ê²½ìš°ì— ì ì ˆí•œ ì„ íƒì´ ë  ìˆ˜ ìžˆë‹¤. ê´€ê³µì„œ ë“±ì—ì„œ ì‚¬ìš©í•œë‹¤.
  - XML ì‚¬ìš©
  - SOAP(ë‹¨ìˆœ ê°ì²´ ì ‘ê·¼ í”„ë¡œí† ì½œ), WSDL(ì›¹ ì„œë¹„ìŠ¤ ê¸°ìˆ  ì–¸ì–´), UDDI(ì „ì—­ ë¹„ì¦ˆë‹ˆìŠ¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬)
  - ê¸ˆìœµê°ë…ì› ë“±
- RESTful service ê¸°ìˆ ì€ ì¸í„°ë„· ì œê³µ ì—…ì²´ ë“±ì—ì„œ ì‚¬ìš©í•œë‹¤.
  - HTTP, JSON
  - Google, Naver ë“±

## RESTful ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼

- ë¶„ì‚° í•˜ì´í¼ë¯¸ë””ì–´ ì‹œìŠ¤í…œ(ex.ì›¹)ì„ ìœ„í•œ ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼(= ì œì•½ ì¡°ê±´ë“¤ì˜ ì§‘í•©)

### RESTì˜ êµ¬ì„±ìš”ì†Œ
1. ìžì›
2. í–‰ìœ„ 
3. í‘œí˜„ 

### REST ì•„í‚¤í…ì²˜ì˜ ì œì•½ ì¡°ê±´
1. ëª¨ë“  ë ˆì†ŒìŠ¤ëŠ” URIë¡œ ì‹ë³„í•œë‹¤. 
2. ëª¨ë“  ë¦¬ì†ŒìŠ¤ëŠ” ë‹¤ì¤‘ í‘œí˜„`multiple reqresentation`ì„ ê°€ì§ˆ ìˆ˜ ìžˆë‹¤.
3. ëª¨ë“  ë¦¬ì†ŒìŠ¤ëŠ” í‘œì¤€ HTTP ë©”ì†Œë“œë¡œ ì ‘ê·¼, ë³€ê²½, ìƒì„±, ì‚­ì œ í•  ìˆ˜ ìžˆë‹¤.
4. ì„œë²„ëŠ” ìƒíƒœ ì •ë³´ë¥¼ ê°–ì§€ ì•ŠëŠ”ë‹¤.

### REST APIì˜ ì„±ìˆ™ë„
![maturity model](https://blog.kakaocdn.net/dn/VS4ID/btrBayhqJhJ/RmRxwbxUKfgs0D1f77gGw0/img.png)

#### HATEOAS `Hypermedia As The Engine Of Application State`

[spring HATEOAS](https://spring.io/projects/spring-hateoas)
- ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ í•˜ì´í¼ ë¯¸ë””ì–´ë¥¼ í†µí•´ ì •ë³´ë¥¼ ë™ì ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” ê²ƒ
- APIì—ì„œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ ì–´ë– í•œ í–‰ë™ì„ í•  ìˆ˜ ìžˆëŠ”ì§€ URLì„ ì „ë‹¬í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ê°€ ì°¸ê³ í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìžˆë„ë¡ í•œë‹¤.
- ì´ë•Œ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœì— ë”°ë¼ ë§í¬ ì •ë³´ê°€ ë°”ë€Œë©° ë™ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ êµ¬ì„±í•œë‹¤.
- ì´ëŸ¬í•œ ë©”ì„¸ì§€ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ í—¤ë”ì˜ Content Typeì„ application/hal+jsonìœ¼ë¡œ ì „ë‹¬í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” _links í•„ë“œì— ë§í¬ ì •ë³´ê°€ ìžˆë‹¤ê³  ì˜ˆìƒí•  ìˆ˜ ìžˆë‹¤.

# MSAì™€ Spring Cloud

## Spring Cloud

Spring Boot ê¸°ë°˜ì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì¶•ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì˜ ì§‘í•©

- cloud-native íŒ¨í„´ ì¤‘ ëª‡ ê°€ì§€ì— ì§‘ì¤‘í•˜ì—¬ ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•˜ëŠ” Spring bootë¥¼ í™•ìž¥
- Spring Cloudì—ëŠ” ë‹¤ìˆ˜ì˜ ì„œë¸Œ í”„ë¡œì íŠ¸ê°€ ìžˆê³  cloud-native ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ ìœ„í•œ ì†”ë£¨ì…˜ì„ ì œê³µí•œë‹¤.
- ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì¼ë°˜ì ì¸ íŒ¨í„´ì„ ë¹ ë¥´ê²Œ ì¡°í•©í•  ìˆ˜ ìžˆë„ë¡ í•´ì¤€ë‹¤.

#### Spring Cloud Netflix

- Nefix OSS(Open Source Software) : ë„·í”Œë¦­ìŠ¤ì—ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ì œê³µí•˜ëŠ” MSA ì „í™˜ ê¸°ìˆ ë“¤
- Spring Cloud Netflix: Spring Cloud ì— Netflix OSSê°€ í†µí•©ëœ ê²ƒ

### MSAì˜ ë‹¨ì ì„ í•´ê²°í•˜ëŠ” ë°©ë²•

1. ë‹¤ìˆ˜ì˜ í•„ìš”í•œ ì„œë¹„ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì°¾ì•„ì•¼ í•˜ëŠ”ê°€? ðŸ’¡ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ì´ìš© (Spring Cloud - Eureka)
2. ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë‹¤ìˆ˜ ì„œë¹„ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–´ë–»ê²Œ ê²°ì •í•´ì•¼ í•˜ëŠ”ê°€? ðŸ’¡ í´ë¼ì´ì–¸íŠ¸-ì‚¬ì´ë“œ ë¡œë“œ ë°¸ëŸ°ì‹± (Spring Cloud - Ribbon)
3. ê°œë³„ì ì¸ ì„œë¹„ìŠ¤ê°€ ì‘ë‹µí•˜ì§€ ì•Šì„ ë•Œ ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ëŠ”ê°€? ðŸ’¡ ê²°í•¨ í—ˆìš© (Spring Cloud - Circuit-Breaker/Hystrix)
4. ë³´ì•ˆ, ì†ë„ì œí•œê³¼ ê°™ì€ ì„œë¹„ìŠ¤ ì ‘ê·¼ì„ ì–´ë–»ê²Œ ì œì–´í•˜ëŠ”ê°€? ðŸ’¡ ì„œë¹„ìŠ¤ ë³´ì•ˆ (Spring Cloud - OAuth2)
5. ë‹¤ìˆ˜ì˜ ì„œë¹„ìŠ¤ëŠ” ì„œë¡œ ì–´ë–»ê²Œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ í•˜ëŠ”ê°€? ðŸ’¡ HTTP/ë©”ì‹œì§• (Spring Cloud - Feign/Spring Cloud Stream)
6. ì„œë¹„ìŠ¤ê°„ ACIDëŠ” ì–´ë–»ê²Œ ë‹¬ì„±í•˜ëŠ”ê°€? ðŸ’¡ CQRS (Spring Cloud - Conductor/Camel)

###### reference

> [Microservices with Spring Boot and Spring Cloud](https://youtube.com/playlist?list=PLOSNUO27qFbv95vD0Cc5Vwtro4vcMZGiy)    
> [ê·¸ëŸ° REST APIë¡œ ê´œì°®ì€ê°€?](https://youtu.be/RP_f5dMoHFc)  
> [Spring HATEOAS ì‚¬ìš©í•´ë³´ê¸°](https://brunch.co.kr/@purpledev/29)