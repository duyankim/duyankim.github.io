---
layout: post
author: "Yan"
catalog: true
subtitle: "RESTfulì— ëŒ€í•´ì„œ"
header-img: "img/header/javascript.jpg"
title: "Express - RESTful, GET. POST"
date: 2021-01-27 20:15:08 +0000
categories:
  - NodeJS
tags:
  - REST
  - Route
  - Express
  - Udemy
---

# Defining RESTful Routes

## REST `REpresentational State Transfer`

- Resourceì˜ Representationì— ì˜í•œ ìƒíƒœ(ì»´í“¨í„°ê°€ ê°€ì§„ ìì›ì˜ ìƒíƒœ. íŒŒì¼/ë°ì´í„°ë² ì´ìŠ¤ ë“±ì„ ìì›ì´ë¼ê³  í•¨. ìƒíƒœ = ì •ë³´) ì „ë‹¬
- HTTP Methodë¥¼ í†µí•´ Resourceë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì•„í‚¤í…ì³
-  PI ì‘ë™ ë°©ì‹ì— ëŒ€í•œ ì¡°ê±´ì„ ë¶€ê³¼í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜

### RESTful
- REST APIë¥¼ ì œê³µí•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤
![restful api](https://blog.kakaocdn.net/dn/xh4UO/btqyV5OLcCC/dsXQxrs7bHuX0TSt3Ur9Uk/img.png)

#### RESTful API ì‘ë™ë°©ì‹
1. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ ì „ì†¡í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ API ë¬¸ì„œì— ë”°ë¼ ì„œë²„ê°€ ì´í•´í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìš”ì²­ í˜•ì‹ì„ ì§€ì •í•œë‹¤.
2. ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•˜ê³  í•´ë‹¹ ìš”ì²­ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ í´ë¼ì´ì–¸íŠ¸ì— ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
3. ì„œë²„ê°€ ìš”ì²­ì„ ìˆ˜ì‹ í•˜ê³  ë‚´ë¶€ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.
4. ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µì„ ë°˜í™˜í•œë‹¤. ì‘ë‹µì—ëŠ” ìš”ì²­ì´ ì„±ê³µí–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë ¤ì£¼ëŠ” ì •ë³´ê°€ í¬í•¨ëœë‹¤. ì‘ë‹µì—ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ëª¨ë“  ì •ë³´ë„ í¬í•¨ëœë‹¤.

## HTTP

ì›¹ìƒì—ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì— ìš”ì²­ê³¼ ì‘ë‹µìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” í”„ë¡œí† ì½œ. HTTPìš”ì²­ì— í¬í•¨ë˜ëŠ” HTTPë©”ì†Œë“œëŠ” ì„œë²„ê°€ ìš”ì²­ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ í•´ì•¼í•  í–‰ë™ì„ í‘œì‹œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.

### ğŸ’¡Â HTTP Method

1. `**GET**` : ë°ì´í„° ì¡°íšŒ
2. `**POST**` : ìƒˆë¡œìš´ ë°ì´í„° ì¶”ê°€
3. `**PUT**` : ë°ì´í„° ì „ì²´ ìˆ˜ì •
4. `**PATCH**` : ë°ì´í„° ì¼ë¶€ ìˆ˜ì •
5. `**DELETE**`  : ì •ë³´ ì‚­ì œ

## [GETê³¼ POSTì˜ ì°¨ì´](https://hongsii.github.io/2017/08/02/what-is-the-difference-get-and-post/)

### GET

- ì„œë²„ë¡œë¶€í„° ì •ë³´ë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•´ ì„¤ê³„ëœ ë©”ì†Œë“œ
- ìš”ì²­ì„ ì „ì†¡í•  ë•Œ í•„ìš”í•œ ë°ì´í„°ë¥¼ bodyê°€ ì•„ë‹Œ querystringì„ í†µí•´ ì „ì†¡
- ìš”ì²­ parameterê°€ ì—¬ëŸ¬ ê°œì¼ ê²½ìš° &ë¡œ ì—°ê²°
- `url?querystring=parmeter?querystring=parameter`ì™€ ê°™ì€ í˜•íƒœ
- ë¶ˆí•„ìš”í•œ ìš”ì²­ì„ ì œí•œí•˜ê¸° ìœ„í•´ ìš”ì²­ì´ ìºì‹œë  ìˆ˜ ìˆë‹¤. ì •ì  ì½˜í…ì¸ ë¥¼ ìš”ì²­í•  ê²½ìš° ë¸Œë¼ìš°ì €ì— ìš”ì²­ì„ ìºì‹œí•´ë‘ê³  ë™ì¼í•œ ìš”ì²­ ë°œìƒì‹œ ìºì‹œëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤. HTTP í—¤ë”ì—ì„œ cache-control í—¤ë”ë¥¼ í†µí•´ ìºì‹œ ì˜µì…˜ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
- ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ì— ë‚¨ëŠ”ë‹¤.
- ë¶ë§ˆí¬ë  ìˆ˜ ìˆë‹¤.
- ê¸¸ì´ ì œí•œì´ ìˆë‹¤. (ë¸Œë¼ìš°ì €ë§ˆë‹¤ ì œí•œì´ ë‹¤ë¥´ë‹¤)
- ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë‹¤ë£¨ë©´ ì•ˆëœë‹¤. íŒŒë¼ë¯¸í„°ì— ë‹¤ ë…¸ì¶œì´ ë˜ì–´ë²„ë¦¬ê¸° ë•Œë¬¸ì´ë‹¤.

### POST

- ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„± ë˜ëŠ” ë³€ê²½í•˜ê¸° ìœ„í•´ ì„¤ê³„ëœ ë©”ì†Œë“œ
- ì „ì†¡í•´ì•¼í•  ë°ì´í„°ë¥¼ HTTPë©”ì„¸ì§€ì˜ BODYì— ë‹´ì•„ ì „ì†¡
- BODY ê¸¸ì´ì˜ ì œí•œ ì—†ì´ ë°ì´í„°ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆì–´ GETê³¼ ë‹¬ë¦¬ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì „ì†¡ ê°€ëŠ¥
- ìš”ì²­ í—¤ë”ì˜ Content-Typeì— ìš”ì²­ ë°ì´í„°ì˜ íƒ€ì…ì„ í‘œì‹œí•´ì•¼í•¨.
- ë°ì´í„° íƒ€ì…ì„ í‘œì‹œí•˜ì§€ ì•Šìœ¼ë©´ ë‚´ìš©ì´ë‚˜ urlì— í¬í•¨ëœ ë¦¬ì†ŒìŠ¤ í™•ì¥ìëª…ìœ¼ë¡œ ì„œë²„ê°€ ë°ì´í„° íƒ€ì…ì„ ìœ ì¶”í•¨.
- ìºì‹œë˜ì§€ ì•ŠëŠ”ë‹¤.
- ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ì— ë‚¨ì§€ ì•ŠëŠ”ë‹¤.
- ë¶ë§ˆí¬ ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ë°ì´í„° ê¸¸ì´ì— ì œí•œì´ ì—†ë‹¤.

### ì°¨ì´ì 

**GETì€ ì„œë²„ì— ë™ì¼í•œ ìš”ì²­ì„ ì—¬ëŸ¬ ë²ˆ ì „ì†¡í•œ ë™ì¼í•œ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚œë‹¤.**

- Idempotentí•œ ì†ì„±(`ë©±ë“±`ì´ë¼ê³  ë¶€ë¥¸ë‹¤: ì—°ì‚°ì„ ì—¬ëŸ¬ ë²ˆ ì ìš©í•˜ë”ë¼ë„ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ì§€ ì•ŠëŠ” ì„±ì§ˆ)
- ì„œë²„ì˜ ë°ì´í„°ë‚˜ ìƒíƒœë¥¼ ë³€ê²½ì‹œí‚¤ì§€ ì•Šê¸° ë•Œë¬¸ì— ì£¼ë¡œ ì¡°íšŒë¥¼ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.
- ex) ë¸Œë¼ìš°ì €ì—ì„œ ì›¹ í˜ì´ì§€ ì—´ì–´ë³´ê¸°, ê²Œì‹œë¬¼ ì½ê¸°

**POSTëŠ” ì„œë²„ì— ë™ì¼í•œ ìš”ì²­ì„ ì—¬ëŸ¬ ë²ˆ í•´ë„ ì‘ë‹µì´ í•­ìƒ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.**

- non-idempotentí•œ ì†ì„±
- ê²Œì‹œë¬¼ ìƒì„± ë“±ì„ í†µí•´ ì„œë²„ì— ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œ ì‚¬ìš©

## PUT

ë¦¬ì†ŒìŠ¤ì˜ ëª¨ë“  ê²ƒì„ ì—…ë°ì´íŠ¸ í•œë‹¤.

## PATCH

ë¦¬ì†ŒìŠ¤ì˜ ì¼ë¶€ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.

# NodeJS ë¬¸ë²•
## [req.body](https://velog.io/@yejinh/express-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4-bodyParser-%EB%AA%A8%EB%93%88)

- node.jsì˜ bodyë¥¼ íŒŒì‹±í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ë‹¤.
- json ë“±ì˜ ë°ì´í„°ë¥¼ ë‹´ì„ ë•Œ ì‚¬ìš©
- ìš”ì²­í•˜ëŠ” bodyì— key-valueìŒì„ í¬í•¨í•œë‹¤.

`app.use(bodyParser.urlencoded({ extended: false }))`

- ë¯¸ë“¤ì›¨ì–´ ì—†ì´ req.bodyì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°, ê¸°ë³¸ì ìœ¼ë¡œ undefinedê°€ ì„¤ì •ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ bodyParserê°™ì€ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ìš”ì²­ ë°ì´í„° ê°’ì— ì ‘ê·¼í•´ì•¼ í•œë‹¤ê³  í•œë‹¤.

- í´ë¼ì´ì–¸íŠ¸ì—ì„œ POSTì™€ PUT ë©”ì†Œë“œë¡œ ìš”ì²­ì‹œ bodyë¥¼ í¬í•¨í•´ì„œ ë³´ë‚¼ ìˆ˜ ìˆëŠ”ë°, ì´ ê°’ì„ ì„œë²„ ë‚´ì—ì„œ í•´ì„ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë³€í˜•í•´ì•¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

- **body parser** : api ìš”ì²­ì—ì„œ ë°›ì€ bodyê°’ì„ íŒŒì‹±í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•¨.

- [**{extended: false}**](https://stackoverflow.com/questions/29960764/what-does-extended-mean-in-express-4-0/45690436)
  - false : querystring library ì‚¬ìš©
  - true : qs library ì‚¬ìš©

###### reference
> [RESTful APIë€ ë¬´ì—‡ì¸ê°€ìš”?](https://aws.amazon.com/ko/what-is/restful-api/)