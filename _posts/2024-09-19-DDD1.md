---
layout: post
author: "Yan"
catalog: true
subtitle: "DDD Ïä§ÌÑ∞Îîî Ïä§ÌÉÄÌä∏!"
header-img: "img/header/none2.jpg"
title: "ÎèÑÎ©îÏù∏ Î™®Îç∏, ÎèÑÎ©îÏù∏ ÏïÑÌÇ§ÌÖçÏ≤ò"
date: 2024-09-19 23:15:08 +0000
categories:
  - DDD
tags:
  - domain
comments: true
---

# ÎèÑÎ©îÏù∏ Î™®Îç∏Ïù¥ÎûÄ?

ÎèÑÎ©îÏù∏Ïù¥ÎûÄ, Íµ¨ÌòÑÌï¥Ïïº Ìï† ÏÜåÌîÑÌä∏Ïõ®Ïñ¥Ïùò ÎåÄÏÉÅÏù¥Îã§.  

Ïù¥Î•ºÌÖåÎ©¥ Ïò®ÎùºÏù∏ ÏÑúÏ†êÏù¥ÎùºÎäî ÎèÑÎ©îÏù∏ÏùÄ Ïó¨Îü¨ ÌïòÏúÑ ÎèÑÎ©îÏù∏ÏúºÎ°ú Ïù¥Î£®Ïñ¥ÏßÄÎäîÎç∞, Ï£ºÎ¨∏, Í≤∞Ï†ú, ÌöåÏõê, Î∞∞ÏÜ°, Ï†ïÏÇ∞, Î¶¨Î∑∞ Îì±ÏúºÎ°ú ÌïòÏúÑ ÎèÑÎ©îÏù∏ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÎã§Í≥† Î≥º Ïàò ÏûàÎã§.

ÎèÑÎ©îÏù∏ Î™®Îç∏Ïù¥ÎûÄ, ÌäπÏ†ï ÎèÑÎ©îÏù∏ÏùÑ Í∞úÎÖêÏ†ÅÏúºÎ°ú ÌëúÌòÑÌïòÎäî Í≤ÉÏù¥Îã§. Í∏∞Î≥∏Ï†ÅÏúºÎ°ú ÎèÑÎ©îÏù∏ ÏûêÏ≤¥Î•º Ïù¥Ìï¥ÌïòÍ∏∞ ÏúÑÌïú Í∞úÎÖê Î™®Îç∏ÏùÑ ÏùòÎØ∏ÌïòÎ©∞, Í∞úÎÖê Î™®Îç∏ÏùÑ Ïù¥Ïö©Ìï¥ÏÑú Î∞îÎ°ú ÏΩîÎìúÎ•º ÏûëÏÑ±Ìï† Ïàò ÏûàÎäî Í≤ÉÏùÄ ÏïÑÎãàÍ∏∞ ÎïåÎ¨∏Ïóê, Íµ¨ÌòÑ Í∏∞Ïà†Ïóê ÎßûÎäî Íµ¨ÌòÑ Î™®Îç∏Ïù¥ Îî∞Î°ú ÌïÑÏöîÌïòÎã§. Í∞úÎÖêÎ™®Îç∏ÏùÄ DB, Ìä∏ÎûúÏû≠ÏÖò Ï≤òÎ¶¨ Îì±ÏùÑ Í≥†Î†§ÌïòÍ≥† ÏûàÏßÄ ÏïäÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§.  

> ÏµúÍ∑º ÏùΩÏùÄ ÎèÑÎ©îÏù∏ Î™®Îç∏Ïùò Ïã§Ï†ú Íµ¨ÌòÑÏóê Í¥ÄÌïú ÏïÑÌã∞ÌÅ¥ - [Ìä∏ÎûúÏû≠ÏÖòÏùÄ ÎèÑÎ©îÏù∏ Î™®Îç∏Ïù¥ ÏïÑÎãàÎã§](https://blog.gangnamunni.com/post/isolate-transaction-from-domain-model/)  
> Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Ìä∏ÎûúÏû≠ÏÖò, ÎÇôÍ¥ÄÏ†Å ÎèôÏãúÏÑ± Ï≤òÎ¶¨Î•º ÏúÑÌïú Î≤ÑÏ†Ñ Ï†ïÎ≥¥ÏôÄ Í∞ôÏùÄ ÏòÅÏÜçÏÑ± ÏßÄÏãùÏùÑ ÎèÑÎ©îÏù∏ Î™®Îç∏Ïóê ÎÖ∏Ï∂úÌïòÍ≥† Ïã∂ÏßÄ ÏïäÏùÑ Îïå, IocÎ•º Ïù¥Ïö©Ìï¥ ÎèÑÎ©îÏù∏ Î™®Îç∏ÏùÑ Ïò§ÏóºÏãúÌÇ§ÏßÄ ÏïäÏùÄ ÏÇ¨Î°ÄÏóê ÎåÄÌï¥ Ïù¥ÏïºÍ∏∞ÌïúÎã§.

## üíé ÎèÑÎ©îÏù∏ Î™®Îç∏ Ìå®ÌÑ¥

![architecture](https://assu10.github.io/assets/img/dev/2024/0331/architecture.png)

1. **Presentation**: ÏÇ¨Ïö©ÏûêÏùò ÏöîÏ≤≠ Ï≤òÎ¶¨ÌïòÍ≥†, Ï†ïÎ≥¥Î•º Î≥¥Ïó¨Ï§å
2. **Application**: ÏÇ¨Ïö©ÏûêÍ∞Ä ÏöîÏ≤≠Ìïú Í∏∞Îä• Ïã§Ìñâ. ÏóÖÎ¨¥ Î°úÏßÅÏùÑ ÏßÅÏ†ë Íµ¨ÌòÑÌïòÏßÄ ÏïäÏúºÎ©∞ ÎèÑÎ©îÏù∏ Í≥ÑÏ∏µÏùÑ Ï°∞Ìï©ÌïòÏó¨ Í∏∞Îä• Ïã§Ìñâ
3. **Domain**: ÏãúÏä§ÌÖúÏù¥ Ï†úÍ≥µÌï† ÎèÑÎ©îÏù∏ Í∑úÏπô Íµ¨ÌòÑ
4. **Infrastructure**: DB, Messaging ÏãúÏä§ÌÖúÍ≥º Í∞ôÏùÄ Ïô∏Î∂Ä ÏãúÏä§ÌÖúÍ≥ºÏùò Ïó∞Îèô Ï≤òÎ¶¨


## üíé ÏóîÌã∞Ìã∞ÏôÄ Î∞∏Î•ò

### ÏóîÌã∞Ìã∞

- ÏãùÎ≥ÑÏûêÎ•º Í∞ÄÏßÑÎã§. ÏãùÎ≥ÑÏûêÎäî ÏóîÌã∞Ìã∞ÎßàÎã§ Í≥†Ïú†ÌïòÎã§. Í∞Å ÏóîÌã∞Ìã∞Îäî ÏÑúÎ°ú Îã§Î•∏ ÏãùÎ≥ÑÏûêÎ•º Í∞ñÎäîÎã§.
- ÏóîÌã∞Ìã∞Ïùò ÏãùÎ≥ÑÏûêÎ•º ÏÉùÏÑ±ÌïòÎäî Î∞©Ïãù
  - ÌäπÏ†ï Í∑úÏπôÏóê Îî∞Îùº ÏÉùÏÑ±
  - UUIDÎÇò Nano IdÍ∞ôÏùÄ Í≥†Ïú† ÏãùÎ≥ÑÏûê ÏÉùÏÑ±Í∏∞ ÏÇ¨Ïö© 
    - UUIDÎûÄ : Í≥µÍ∞ú ÏÜåÌîÑÌä∏Ïõ®Ïñ¥ Ïû¨Îã®(OSF)ÏóêÏÑú ÎßåÎì† Í≥†Ïú†ÏÑ±Ïù¥ Î≥¥Ïû•ÎêòÎäî ÌëúÏ§Ä Í∑úÏïΩ
    - Íµ¨ÏÑ± : 128bits `Timestamp(8)` - `Timestamp(4)` - `Timestamp & Version(4)` - `Variant & Clock sequence(4)` - `Node id(12)`
  - Í∞íÏùÑ ÏßÅÏ†ë ÏûÖÎ†•
  - ÏùºÎ†®Î≤àÌò∏ ÏÇ¨Ïö©(ÏãúÌÄÄÏä§ÎÇò DBÏùò ÏûêÎèô Ï¶ùÍ∞Ä Ïª¨Îüº ÏÇ¨Ïö©)

> Ï∞∏Í≥†, MySQLÏóêÏÑú UUIDÎ•º PKÎ°ú ÏÇ¨Ïö©ÌïòÎ†§ ÌïúÎã§Î©¥, Í≥†Î†§Ìï¥Ïïº Îê† Ï†êÏù¥ ÏûàÎã§. MySQLÏùÄ ÌÅ¥Îü¨Ïä§ÌÑ∞Îìú Ïù∏Îç±Ïä§Î°ú ÎêòÏñ¥ ÏûàÏñ¥ ÏàúÏ∞®Ï†ÅÏù∏ Ïù∏Îç±Ïä§Ïóê ÏµúÏ†ÅÌôîÎêòÏñ¥ ÏûàÍ∏∞ ÎïåÎ¨∏Ïóê, UUIDÎäî ÏÑ±Îä•Ï†ÅÏù∏ Ï∏°Î©¥ÏóêÏÑú ÎπÑÌö®Ïú®Ï†ÅÏù¥Îã§.  
> ÌÅ¥Îü¨Ïä§ÌÑ∞Îìú Ïù∏Îç±Ïä§Îäî B- Ìä∏Î¶¨ Íµ¨Ï°∞Î°ú ÎêòÏñ¥ ÏûàÏñ¥ Ìï≠ÏÉÅ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ•º Ïú†ÏßÄÌïúÎã§.(MySQL8 Í∏∞Ï§Ä)  
> ÏãúÌÄÄÏä§Î•º Í∏∞Î∞òÏúºÎ°ú ÏàúÏ∞®Ï†ÅÏúºÎ°ú Í∞íÏù¥ Ïò¨ÎùºÍ∞ÄÎäî Í≤ΩÏö∞, Îç∞Ïù¥ÌÑ∞Î•º ÏÇΩÏûÖÌï† Îïå Íµ¨ÏÑ±Ïù¥ ÌÅ¨Í≤å Î≥ÄÌïòÏßÄ ÏïäÏßÄÎßå, Î¨¥ÏûëÏúÑ Í∞íÏùÑ Ïù∏Îç±Ïä§Î°ú ÏÇ¨Ïö©ÌïòÍ≤å ÎêòÎ©¥ Îç∞Ïù¥ÌÑ∞Î•º Ï∂îÍ∞ÄÌï† ÎïåÎßàÎã§ Íµ¨Ï°∞Î•º Ïû¨Î∞∞ÏπòÌï¥Ïïº ÌïòÎØÄÎ°ú ÏÑ±Îä•Ïóê ÏòÅÌñ•ÏùÑ ÎØ∏ÏπòÍ≤å ÎêúÎã§.  
> ÎòêÌïú, Ïù∏Îç±Ïä§Îäî ÌïòÎìúÎîîÏä§ÌÅ¨Ïóê Ï†ÄÏû•Ïù¥ ÎêòÎäîÎç∞, 32bytesÎùºÎäî ÎπÑÍµêÏ†Å ÌÅ∞ Í∞íÏùÑ ÏÇ¨Ïö©ÌïòÍ≤å ÎêòÎ©¥ Ïù∏Îç±Ïä§ ÌéòÏù¥ÏßÄÏùò ÌÅ¨Í∏∞Í∞Ä Ïª§ÏßÄÎäî Î¨∏Ï†úÍ∞Ä ÏûàÎã§. 

## üíé Î∞∏Î•ò ÌÉÄÏûÖ

Í∞úÎÖêÏ†ÅÏúºÎ°ú ÏôÑÏ†ÑÌïú ÌïòÎÇòÎ•º ÌëúÌòÑÌï† Îïå ÏÇ¨Ïö©ÌïúÎã§. 

ÏòàÏãú)

```java
public class OrderLine {
  private Product product;
  private int price;
  private int quantity;
  private int amounts;
}
```

price ÏôÄ amountÎäî 'Îèà'ÏùÑ ÏùòÎØ∏ÌïòÎäî Í∞íÏù¥Í∏∞ ÎïåÎ¨∏Ïóê, MoneyÌÉÄÏûÖÏùÑ ÎßåÎì§Ïñ¥ÏÑú ÏÇ¨Ïö©ÌïòÎ©¥ MoneyÌÉÄÏûÖÏùÑ ÏúÑÌïú Í∏∞Îä•ÏùÑ Ï∂îÍ∞ÄÌïòÏó¨ ÏÇ¨Ïö©Ìï† ÏàòÎèÑ ÏûàÎã§. 

```java
public class Money {
  private int value;

  // ÏÉùÏÑ±Ïûê, getter

  public Money add(Money money) {
    return new Money(this.value + money.value);
  }

  public Money multiply(int multiplier) {
    return new Money(value * multiplier);
  }
}
```

### Î∞∏Î•ò ÌÉÄÏûÖÏùÑ immutable ÌÉÄÏûÖÏúºÎ°ú ÏÇ¨Ïö©ÌïòÍ∏∞

- Î∞∏Î•ò Í∞ùÏ≤¥ Îç∞Ïù¥ÌÑ∞ Î≥ÄÍ≤ΩÏãú, Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Î≥ÄÍ≤Ω Î≥¥Îã§Îäî ÏÉàÎ°úÏö¥ Î∞∏Î•ò Í∞ùÏ≤¥ ÏÉùÏÑ±ÌïòÎäî Ìé∏Ïù¥ Î≥¥Îã§ ÏïàÏ†ÑÌïòÎã§.
  - Î∂àÎ≥ÄÍ∞ùÏ≤¥Îäî Ï∞∏Ï°∞ Ìà¨Î™ÖÏÑ±ÏùÑ Í∞ÄÏßÄÍ≥†, Ïä§Î†àÎìúÏóê ÏïàÏ†ÑÌïòÎã§.
- Î∂àÎ≥Ä Í∞ùÏ≤¥Í∞Ä ÏïÑÎãàÎùºÎ©¥, Ï∞∏Ï°∞ Ìà¨Î™ÖÏÑ±Ïù¥ ÌõºÏÜêÎêòÏñ¥ Í∞íÏù¥ Ï§ëÍ∞ÑÏóê Î≥ÄÍ≤ΩÎê† Í∞ÄÎä•ÏÑ±Ïù¥ ÏûàÎã§. 

### ÏóîÌã∞Ìã∞ ÏãùÎ≥ÑÏûêÎ•º Î∞∏Î•òÌÉÄÏûÖÏúºÎ°ú ÎßåÎì§Í∏∞

StringÏúºÎ°ú Îêú ÏãùÎ≥ÑÏûêÎèÑ Î∞∏Î•ò ÌÉÄÏûÖÏúºÎ°ú ÎßåÎì§Ïñ¥ÏÑú Ïù¥Î•ºÌÖåÎ©¥ 'Ï£ºÎ¨∏Î≤àÌò∏ OrderNo' Î∞∏Î•òÌÉÄÏûÖÏúºÎ°ú ÎßåÎì§Ïñ¥ÏÑú Î™ÖÏãúÏ†ÅÏúºÎ°ú ÏÇ¨Ïö©Ìï† ÏàòÎèÑ ÏûàÎã§.


## üíé ÎèÑÎ©îÏù∏ Î™®Îç∏Ïóê get/set Î©îÏÜåÎìúÎ•º ÏäµÍ¥ÄÏ†ÅÏúºÎ°ú ÎßåÎì§ÏßÄ ÎßêÏûê

- setÎ©îÏÑúÎìúÎäî ÎèÑÎ©îÏù∏Ïùò ÌïµÏã¨ Í∞úÎÖêÏù¥ÎÇò ÏùòÎèÑÎ•º ÏΩîÎìúÏóêÏÑú ÏÇ¨ÎùºÏßÄÍ≤å ÌïúÎã§. Îçî Î™ÖÏãúÏ†ÅÏù∏ Î©îÏÜåÎìú Î™ÖÏùÑ ÏßÄÏñ¥, ÏÉÅÌÉú Î≥ÄÍ≤ΩÍ≥º Í¥ÄÎ†®Îêú ÎèÑÎ©îÏù∏ ÏßÄÏãùÏùÑ ÏΩîÎìúÏóê ÎÇ®Í≤®Îùº.
- setÎ©îÏÑúÎìúÎ•º ÏÇ¨Ïö©Ìï¥ ÎèÑÎ©îÏù∏ Í∞ùÏ≤¥Î•º ÏÉùÏÑ±Ìï† Í≤ΩÏö∞, Í∞ùÏ≤¥Í∞Ä Î∂àÏôÑÏ†ÑÌïú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±ÎêòÍ≥† ÏÇ¨Ïö©Îê† Ïàò ÏûàÎã§. Îî∞ÎùºÏÑú ÏÉùÏÑ± ÏãúÏ†êÏóê ÏÉùÏÑ±ÏûêÎ•º ÌÜµÌï¥ ÌïÑÏöîÌïú Îç∞Ïù¥ÌÑ∞Î•º Î™®Îëê Î∞õÎäî Í≤ÉÏù¥ Ï¢ãÎã§.

# ÏïÑÌÇ§ÌÖçÏ≤ò (ÌëúÌòÑ - ÏùëÏö© - ÎèÑÎ©îÏù∏ - Ïù∏ÌîÑÎùºÏä§Ìä∏Îü≠Ï≥ê)

Í≥ÑÏ∏µÍµ¨Ï°∞ ÏïÑÌÇ§ÌÖçÏ≤ò Íµ¨Ï°∞Îäî, **ÏÉÅÏúÑ Í≥ÑÏ∏µ -> ÌïòÏúÑ Í≥ÑÏ∏µÏúºÎ°úÏùò ÏùòÏ°¥**ÌïúÎã§. ÌïòÏúÑ Í≥ÑÏ∏µ -> ÏÉÅÏúÑ Í≥ÑÏ∏µÏóê ÏùòÏ°¥ÌïòÏßÄ ÏïäÎäîÎã§.  

ÌëúÌòÑ, ÏùëÏö©, ÎèÑÎ©îÏù∏ Í≥ÑÏ∏µÏù¥ Ïù∏ÌîÑÎùº Í≥ÑÏ∏µÏóê Ï¢ÖÏÜçÎê† Ïàò ÏûàÎäîÎç∞, Ïù¥Îü¨Î©¥ **Íµ¨ÌòÑ Î∞©ÏãùÏùÑ Î≥ÄÍ≤ΩÌïòÍ∏∞ Ïñ¥Î†µÍ≥† ÌÖåÏä§Ìä∏ÌïòÍ∏∞ Ïñ¥Î†§ÏõåÏßÑÎã§**. -> **DIPÎ•º Ïù¥Ïö©Ìï¥ Ìï¥Í≤∞** Í∞ÄÎä•ÌïòÎã§  

### ÌëúÌòÑ ÏòÅÏó≠

Ïä§ÌîÑÎßÅÏùò MVC ÌîÑÎ†àÏûÑÏõåÌÅ¨Í∞Ä ÌëúÌòÑ ÏòÅÏó≠ÏùÑ ÏúÑÌïú Í∏∞Ïà†Ïóê Ìï¥ÎãπÌïúÎã§.

![presentation](https://assu10.github.io/assets/img/dev/2024/0401/presentation.png)

ÏÇ¨Ïö©ÏûêÏùò ÏöîÏ≤≠ÏùÑ Î∞õÏïÑ ÏùëÏö© ÏòÅÏó≠Ïóê Ï†ÑÎã¨ ÌõÑ, ÏùëÏö© ÏòÅÏó≠Ïù¥ Ï≤òÎ¶¨Ìïú Í≤∞Í≥ºÎ•º Îã§Ïãú ÏÇ¨Ïö©ÏûêÏóêÍ≤å Ï†ÑÎã¨ÌïúÎã§.

### ÏùëÏö© ÏòÅÏó≠

Î°úÏßÅÏùÑ ÏßÅÏ†ë ÏàòÌñâÌïòÍ∏∞ Î≥¥Îã§ ÎèÑÎ©îÏù∏ Î™®Îç∏Ïóê Î°úÏßÅ ÏàòÌñâÏùÑ ÏúÑÏûÑÌïúÎã§.

![service](https://assu10.github.io/assets/img/dev/2024/0401/application.png)

### ÎèÑÎ©îÏù∏ ÏòÅÏó≠

ÎèÑÎ©îÏù∏ Î™®Îç∏ÏùÑ Íµ¨ÌòÑÌïúÎã§. ÎèÑÎ©îÏù∏Ïùò ÌïµÏã¨ Î°úÏßÅÏùÑ Íµ¨ÌòÑÌïúÎã§.

### Ïù∏ÌîÑÎùºÏä§Ìä∏Îü≠Ï≥ê ÏòÅÏó≠

Íµ¨ÌòÑ Í∏∞Ïà†Ïóê ÎåÄÌïú Í≤É(RDBMSÏó∞Îèô, Î©îÏÑ∏ÏßÄ ÌÅêÏóê Î©îÏãúÏßÄ Ï†ÑÏÜ°/ÏàòÏã†, Î†àÎîîÏä§ÏôÄ Îç∞Ïù¥ÌÑ∞ Ïó∞Îèô Ï≤òÎ¶¨ Îì±)ÏùÑ Îã§Î£¨Îã§.

![infra](https://assu10.github.io/assets/img/dev/2024/0401/infrastructrue.png)

## üíé DIP

DIPÎäî Í≥ÑÏ∏µÍµ¨Ï°∞Í∞Ä Íµ¨ÌòÑ Î≥ÄÍ≤ΩÍ≥º ÌÖåÏä§Ìä∏Í∞Ä Ïñ¥Î†µÎã§Îäî Î¨∏Ï†úÎ•º Í∞ÄÏßÑ Í≤ÉÏùÑ Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥, **Ï∂îÏÉÅÌôî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º ÌÜµÌï¥** Ï†ÄÏàòÏ§Ä Î™®Îç∏Ïù¥ Í≥†ÏàòÏ§Ä Î™®Îç∏Ïóê ÏùòÏ°¥ÌïòÎèÑÎ°ù Î∞îÍæºÎã§.

![Ï†ÄÏàòÏ§ÄÍ≥†ÏàòÏ§ÄÎ™®Îç∏](https://assu10.github.io/assets/img/dev/2024/0401/dip.png)

Ï∂îÏÉÅÌôî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Ïóê ÏùòÏ°¥ÌïòÎèÑÎ°ù DIPÎ•º Ï†ÅÏö©Ìïú Íµ¨Ï°∞. ÏÉÅÏÜçÏùÄ ÏùòÏ°¥Ïùò Îã§Î•∏ ÌòïÌÉúÏù¥Îã§.

![DIPÏ†ÅÏö©](https://assu10.github.io/assets/img/dev/2024/0401/dip_2.png)

CalculateDiscountServiceÎäî Íµ¨ÌòÑ Í∏∞Ïà†Ïù∏ DrollsRuleDiscounter`Ï†ÄÏàòÏ§Ä Î™®Îìà`Ïóê ÏùòÏ°¥ÌïòÏßÄ ÏïäÍ≥†, 'Î£∞ÏùÑ Ïù¥Ïö©Ìïú Ìï†Ïù∏ Í∏àÏï° Í≥ÑÏÇ∞'ÏùÑ Ï∂îÏÉÅÌôîÌïú RuleDiscounter Ïù∏ÌÑ∞ÌéòÏù¥Ïä§`Í≥†ÏàòÏ§Ä Î™®Îìà`Ïóê ÏùòÏ°¥ÌïúÎã§.  

Í≥†ÏàòÏ§Ä Î™®ÎìàÏùÄ Îçî Ïù¥ÏÉÅ Ï†ÄÏàòÏ§Ä Î™®ÎìàÏóê ÏùòÏ°¥ÌïòÏßÄ ÏïäÍ≥†, Íµ¨ÌòÑÏùÑ Ï∂îÏÉÅÌôîÌïú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Ïóê ÏùòÏ°¥ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê, ÏùòÏ°¥ Ï£ºÏûÖÏùÑ Ïù¥Ïö©Ìï¥ÏÑú Ï†ÄÏàòÏ§Ä Íµ¨ÌòÑ Í∞ùÏ≤¥Î•º Ï†ÑÎã¨Î∞õÏùÑ Ïàò ÏûàÎã§.

```java
// ÏÇ¨Ïö©Ìï† Ï†ÄÏàòÏ§Ä Í∞ùÏ≤¥ ÏÉùÏÑ±
RuleDiscounter ruleDiscounter = new DroolsRuleDiscounter();

// ÏÉùÏÑ±Ïûê Î∞©ÏãùÏúºÎ°ú Ï£ºÏûÖ
CalculateDiscountService discountService = new CalculateDiscountService(ruleDiscounter);
```

### DIPÏùò Ìö®Í≥º
- ÏÇ¨Ïö©Ìï† Ï†ÄÏàòÏ§Ä Î™®ÎìàÏùÑ Î≥ÄÍ≤ΩÌï¥ÎèÑ Í≥†ÏàòÏ§Ä Î™®ÎìàÏùÑ ÏàòÏ†ïÌï† ÌïÑÏöîÍ∞Ä ÏóÜÎã§.
- MockÏùÑ ÏÇ¨Ïö©Ìï¥ Ïã§Ï†ú Íµ¨ÌòÑ ÌÅ¥ÎûòÏä§ ÏóÜÏù¥ÎèÑ ÏÑúÎπÑÏä§ ÌÖåÏä§Ìä∏Î•º Ìï† Ïàò ÏûàÎã§.

### DIP Ï†ÅÏö© Ï£ºÏùòÏÇ¨Ìï≠

**DIPÏùò ÌïµÏã¨ÏùÄ Í≥†ÏàòÏ§Ä Î™®ÎìàÏù¥ Ï†ÄÏàòÏ§Ä Î™®ÎìàÏóê ÏùòÏ°¥ÌïòÏßÄ ÏïäÎèÑÎ°ù ÌïòÎäî Í≤ÉÏù¥Îã§.**

ÏûòÎ™ª Ï†ÅÏö©Ìïú ÏòàÏãú

![](https://assu10.github.io/assets/img/dev/2024/0401/dip_3.png)

DIP Î•º Ï†ÅÏö©Ìï† Îïå ÌïòÏúÑ Í∏∞Îä•ÏùÑ Ï∂îÏÉÅÌôîÌïú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Îäî Í≥†ÏàòÏ§Ä Î™®Îìà Í¥ÄÏ†êÏóêÏÑú ÎèÑÏ∂úÌï¥Ïïº ÌïúÎã§.  

CalculateDiscountService ÏûÖÏû•ÏóêÏÑú Ìï†Ïù∏ Í∏àÏï°ÏùÑ Íµ¨ÌïòÍ∏∞ ÏúÑÌï¥ Î£∞ ÏóîÏßÑÏùÑ ÏÇ¨Ïö©ÌïòÎçò Îã§Î•∏ ÏóîÏßÑÏùÑ ÏÇ¨Ïö©ÌïòÎçòÏßÄÎäî Ï§ëÏöîÌïòÏßÄ ÏïäÍ≥†, Ïò§ÏßÅ Í∑úÏπôÏóê Îî∞Îùº Ìï†Ïù∏ Í∏àÏï°ÏùÑ Í≥ÑÏÇ∞ÌïúÎã§Îäî Í≤ÉÏù¥ Ï§ëÏöîÌïòÎã§.

### DIP Ï†ÅÏö©Ïãú ÏïÑÌÇ§ÌÖçÏ≤ò

DIPÎ•º Ï†ÅÏö©ÌïòÎ©¥ Ïù∏ÌîÑÎùºÏä§Ìä∏Îü≠Ï≥ê ÏòÅÏó≠Ïù¥ ÏùëÏö© ÏòÅÏó≠Í≥º ÎèÑÎ©îÏù∏ ÏòÅÏó≠Ïóê ÏùòÏ°¥ÌïòÎäî Íµ¨Ï°∞Í∞Ä ÎêúÎã§.  
Ïù∏ÌîÑÎùºÏä§Ìä∏Îü≠Ï≤òÏóê ÏúÑÏπòÌïú ÌÅ¥ÎûòÏä§Í∞Ä ÎèÑÎ©îÏù∏Ïù¥ÎÇò ÏùëÏö© ÏòÅÏó≠Ïóê Ï†ïÏùòÌïú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º ÏÉÅÏÜçÎ∞õÏïÑ Íµ¨ÌòÑÌïòÎäî Íµ¨Ï°∞Í∞Ä ÎêòÍ∏∞ ÎïåÎ¨∏Ïóê ÎèÑÎ©îÏù∏Í≥º ÏùëÏö© ÏòÅÏó≠Ïóê ÎåÄÌïú ÏòÅÌñ•ÏùÑ Ï£ºÏßÄ ÏïäÍ±∞ÎÇò, ÏµúÏÜåÌôîÌïòÎ©¥ÏÑú Íµ¨ÌòÑ Í∏∞Ïà†ÏùÑ Î≥ÄÍ≤ΩÌïòÎäî Í≤ÉÏù¥ Í∞ÄÎä•ÌïòÎã§.  

> DIPÎ•º Ìï≠ÏÉÅ Ï†ÅÏö©Ìï† ÌïÑÏöîÎäî ÏóÜÎã§. DIPÏùò Ïù¥Ï†êÏùÑ ÏñªÎäî ÏàòÏ§ÄÏóêÏÑú Ï†ÅÏö© Î≤îÏúÑÎ•º Í≤ÄÌÜ†Ìï¥Î≥¥Í≥† Ï†ÅÏö©ÌïòÏûê.

## üíé ÎèÑÎ©îÏù∏ ÏòÅÏó≠Ïùò Ï£ºÏöî Íµ¨ÏÑ±ÏöîÏÜå

1. ÏóîÌã∞Ìã∞
2. Î∞∏Î•ò
3. Ïï†Í∑∏Î¶¨Í±∞Ìä∏
4. Î¶¨Ìè¨ÏßÄÌÑ∞Î¶¨
5. ÎèÑÎ©îÏù∏ ÏÑúÎπÑÏä§

### ÏóîÌã∞Ìã∞ÏôÄ Î∞∏Î•ò

- ÎèÑÎ©îÏù∏ Î™®Îç∏Ïùò ÏóîÌã∞Ìã∞: Îã®ÏàúÌûà Îç∞Ïù¥ÌÑ∞Î•º Îã¥Í≥† ÏûàÎäî Íµ¨Ï°∞ or DB Í¥ÄÍ≥ÑÌòï Î™®Îç∏Ïùò ÏóîÌã∞Ìã∞Í∞Ä ÏïÑÎãå, Îç∞Ïù¥ÌÑ∞ÏôÄ Ìï®Í≤å Í∏∞Ï¶ùÏùÑ Ï†úÍ≥µÌïòÎäî Í∞ùÏ≤¥
  - ÎèÑÎ©îÏù∏ Í¥ÄÏ†êÏóêÏÑú Í∏∞Îä•ÏùÑ Íµ¨ÌòÑÌïòÍ≥† Í∏∞Îä• Íµ¨ÌòÑÏùÑ Ï∫°ÏäêÌôîÌï¥ÏÑú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûÑÏùòÎ°ú Î≥ÄÍ≤ΩÎêòÎäî Í≤ÉÏùÑ ÎßâÎäîÎã§.
  - Îëê Í∞ú Ïù¥ÏÉÅÏùò Îç∞Ïù¥ÌÑ∞Í∞Ä Í∞úÎÖêÏ†ÅÏúºÎ°ú ÌïòÎÇòÏù∏ Í≤ΩÏö∞ Î∞∏Î•ò ÌÉÄÏûÖÏùÑ Ïù¥Ïö©Ìï¥ÏÑú ÌëúÌòÑÌï† Ïàò ÏûàÎã§.

### Ïï†Í∑∏Î¶¨Í±∞Ìä∏

- ÎèÑÎ©îÏù∏ Î™®Îç∏Ïù¥ Î≥µÏû°Ìï¥ÏßÄÎ©¥, ÌÅ∞ Í∑∏Î¶ºÏùÑ Î≥¥Í∏∞ ÌûòÎì§Ïñ¥ÏßÑÎã§. **Ïï†Í∑∏Î¶¨Í±∞Ìä∏Îäî Í¥ÄÎ†® Í∞ùÏ≤¥Î•º ÌïòÎÇòÎ°ú Î¨∂ÏùÄ Íµ∞Ïßë**ÏúºÎ°ú, Í¥ÄÎ†®Îêú Í∞ùÏ≤¥Î•º Í¥ÄÎ¶¨ÌïòÎäîÎç∞ ÎèÑÏõÄÏù¥ ÎêúÎã§.
- ÏòàÏãú: ÎèÑÎ©îÏù∏(Ï£ºÎ¨∏, Î∞∞ÏÜ°ÏßÄ Ï†ïÎ≥¥, Ï£ºÎ¨∏Ïûê, Ï£ºÎ¨∏ Î™©Î°ù, Ï¥ù Í≤∞Ï†ú Í∏àÏï° Îì±) - Ïï†Í∑∏Î¶¨Í±∞Ìä∏ 'Ï£ºÎ¨∏'
- Ïï†Í∑∏Î¶¨Í±∞Ìä∏Îäî Íµ∞ÏßëÏóê ÏÜçÌïú Í∞ùÏ≤¥Î•º Í¥ÄÎ¶¨ÌïòÎäî Î£®Ìä∏ ÏóîÌã∞Ìã∞Î•º Í∞ñÎäîÎã§. 
  - **Î£®Ìä∏ ÏóîÌã∞Ìã∞**: Ïï†Í∑∏Î¶¨Í±∞Ìä∏Ïóê ÏÜçÌï¥ ÏûàÎäî ÏóîÌã∞Ìã∞ÏôÄ Î≤®Î•ò Í∞ùÏ≤¥Î•º Ïù¥Ïö©Ìï¥ÏÑú Ïï†Í∑∏Î¶¨Í±∞Ìä∏Í∞Ä Ìï† Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌïúÎã§.
  - Ïï†Í∑∏Î¶¨Í±∞Ìä∏Î•º ÏÇ¨Ïö©ÌïòÎäî ÏΩîÎìúÎäî Ïï†Í∑∏Î¶¨Í±∞Ìä∏ Î£®Ìä∏Í∞Ä Ï†úÍ≥µÌïòÎäî Í∏∞Îä•ÏùÑ Ïã§ÌñâÌïúÎã§. Ïï†Í∑∏Î¶¨Í±∞Ìä∏ Î£®Ìä∏Î•º ÌÜµÌï¥ÏÑú Í∞ÑÏ†ëÏ†ÅÏúºÎ°ú Ïï†Í∑∏Î¶¨Í±∞Ìä∏ ÎÇ¥Ïùò Îã§Î•∏ ÏóîÌã∞Ìã∞ÎÇò Î∞∏Î•ò Í∞ùÏ≤¥Ïóê Ï†ëÍ∑ºÌïòÍ≤å ÎêúÎã§.
  - Ïï†Í∑∏Î¶¨Í±∞Ìä∏Ïùò ÎÇ¥Î∂Ä Íµ¨ÌòÑÏùÑ Ïà®Í≤®ÏÑú **Ïï†Í∑∏Î¶¨Í±∞Ìä∏ Îã®ÏúÑÎ°ú Íµ¨ÌòÑÏùÑ Ï∫°ÏäêÌôî** Ìï† Ïàò ÏûàÎèÑÎ°ù ÎèïÎäî Í≤ÉÏù¥Îã§.

![](https://assu10.github.io/assets/img/dev/2024/0401/aggregate.png)

### Î¶¨Ìè¨ÏßÄÌÑ∞Î¶¨

- Íµ¨ÌòÑÏùÑ ÏúÑÌïú ÎèÑÎ©îÏù∏ Î™®Îç∏ (RDBMS, NoSQL, Î°úÏª¨ ÌååÏùºÍ≥º Í∞ôÏùÄ Î¨ºÎ¶¨Ï†ÅÏù∏ Ï†ÄÏû•ÏÜåÏóê ÎèÑÎ©îÏù∏ Í∞ùÏ≤¥Î•º Î≥¥Í¥ÄÌï† Ïàò ÏûàÎèÑÎ°ù ÌïòÎäî Í≤É)
- Î¶¨Ìè¨ÏßÄÌÑ∞Î¶¨Îäî Ïï†Í∑∏Î¶¨Í±∞Ìä∏ Îã®ÏúÑÎ°ú ÎèÑÎ©îÏù∏ Í∞ùÏ≤¥Î•º Ï†ÄÏû•ÌïòÍ≥† Ï°∞ÌöåÌïòÎäî Í∏∞Îä•ÏùÑ Ï†ïÏùòÌïúÎã§.
   - Î¶¨Ìè¨ÏßÄÌÑ∞Î¶¨Î•º ÏÇ¨Ïö©ÌïòÎäî Ï£ºÏ≤¥Í∞Ä ÏùëÏö© ÏÑúÎπÑÏä§Ïù¥Í∏∞ ÎïåÎ¨∏Ïóê Î¶¨Ìè¨ÏßÄÌÑ∞Î¶¨Îäî ÏùëÏö© ÏÑúÎπÑÏä§Í∞Ä ÌïÑÏöîÎ°ú ÌïòÎäî Î©îÏÑúÎìúÎ•º Ï†úÍ≥µÌïúÎã§.
   - (1) Ïï†Í∑∏Î¶¨Í±∞Ìä∏Î•º Ï†ÄÏû•ÌïòÎäî Î©îÏÑúÎìú
   - (2) Ïï†Í∑∏Î¶¨Í±∞Ìä∏ Î£®Ìä∏ ÏãùÎ≥ÑÏûêÎ°ú Ïï†Í∑∏Î¶¨Í±∞Ìä∏Î•º Ï°∞ÌöåÌïòÎäî Î©îÏÑúÎìú

![](https://assu10.github.io/assets/img/dev/2024/0401/repository.png)

- OrderRepository Îäî ÎèÑÎ©îÏù∏ Í∞ùÏ≤¥Î•º ÏòÅÏÜçÌôîÌïòÎäîÎç∞ ÌïÑÏöîÌïú Í∏∞Îä•ÏùÑ Ï∂îÏÉÅÌôîÌïú Í≤ÉÏúºÎ°ú Í≥†ÏàòÏ§Ä Î™®ÎìàÏóê ÏÜçÌïúÎã§.
- OrderRepository Î•º Íµ¨ÌòÑÌïú ÌÅ¥ÎûòÏä§Îäî Ï†ÄÏàòÏ§Ä Î™®ÎìàÎ°ú Ïù∏ÌîÑÎùºÏä§Ìä∏Îü≠Ï≤ò ÏòÅÏó≠Ïóê ÏÜçÌïúÎã§.

## üíé ÏöîÏ≤≠ Ï≤òÎ¶¨ ÌùêÎ¶Ñ

![](https://user-images.githubusercontent.com/43809168/97808100-1d80dd00-1ca8-11eb-8d8b-8c530d0a8fb4.png)


###### reference

> ÎèÑÎ©îÏù∏ Ï£ºÎèÑ Í∞úÎ∞ú ÏãúÏûëÌïòÍ∏∞  
> [DDD - ÎèÑÎ©îÏù∏ Î™®Îç∏, ÎèÑÎ©îÏù∏ Î™®Îç∏ Ìå®ÌÑ¥, ÎèÑÎ©îÏù∏ Î™®Îç∏ ÎèÑÏ∂ú Í≥ºÏ†ï, ÏóîÌã∞Ìã∞ÏôÄ Î∞∏Î•ò](https://assu10.github.io/dev/2024/03/31/ddd-basic/#2-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%AA%A8%EB%8D%B8-%ED%8C%A8%ED%84%B4)  
> [[MySQL] UUIDÏùò Í∞úÎÖêÍ≥º ÏÑ±Îä• Í∞úÏÑ† Í≤∞Í≥º](https://chanos.tistory.com/entry/MySQL-UUID%EB%A5%BC-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9C%BC%EB%A1%9C-%ED%99%9C%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%85%B8%EB%A0%A5%EA%B3%BC-%ED%95%9C%EA%B3%84)
